<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç»œæ”»å‡»æ£€æµ‹ç³»ç»Ÿ</title>
    <!-- å¼•å…¥Chart.jsç”¨äºæ•°æ®å¯è§†åŒ– (æ·»åŠ å¤‡ç”¨æº) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // æ£€æŸ¥Chart.jsæ˜¯å¦åŠ è½½æˆåŠŸ
        if (typeof Chart === 'undefined') {
            // å¤‡ç”¨CDNæº1
            const script1 = document.createElement('script');
            script1.src = 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js';
            script1.onload = function() {
                console.log('Chart.js å¤‡ç”¨æº1åŠ è½½æˆåŠŸ');
            };
            script1.onerror = function() {
                // å¤‡ç”¨CDNæº2
                const script2 = document.createElement('script');
                script2.src = 'https://unpkg.com/chart.js@3.9.1/dist/chart.min.js';
                script2.onload = function() {
                    console.log('Chart.js å¤‡ç”¨æº2åŠ è½½æˆåŠŸ');
                };
                script2.onerror = function() {
                    console.log('Chart.js åŠ è½½å¤±è´¥ï¼Œå°†ä½¿ç”¨æ–‡æœ¬ç»Ÿè®¡æ¨¡å¼');
                };
                document.head.appendChild(script2);
            };
            document.head.appendChild(script1);
        }
    </script>
    <!-- å¼•å…¥è‡ªå®šä¹‰æ ·å¼ -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 class="title">ç½‘ç»œæ”»å‡»æ£€æµ‹ç³»ç»Ÿ</h1>
        
        <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
        <div class="file-upload-area" onclick="document.getElementById('file-input').click()">
            <div class="file-icon">ğŸ“</div>
            <p class="file-upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½CSVæ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </p>
            <span id="file-name">æœªé€‰æ‹©æ–‡ä»¶</span>
            <input type="file" id="file-input" accept=".csv" class="hidden">
        </div>
        
        <!-- æ¨¡å‹é€‰æ‹© -->
        <div class="model-selection">
            <label for="model-select" class="model-label">é€‰æ‹©é¢„æµ‹æ¨¡å‹:</label>
            <select id="model-select" class="model-select">
                <option value="catboost">CatBoostæ¨¡å‹ï¼šåå‘äºæ£€æµ‹</option>
                <option value="random_forest">éšæœºæ£®æ—æ¨¡å‹ï¼šæåº¦åå‘æ£€æµ‹æ”»å‡»ï¼Œæœ€å®¹æ˜“è¯¯æŠ¥</option>
                <option value="xgboost">XGBoostæ¨¡å‹ï¼šæ•´ä½“æ¯”è¾ƒå¹³è¡¡</option>
                <option value="stacking">Stackingé›†æˆæ¨¡å‹ï¼šæœ€å‡è¡¡ï¼Œæœ€ä¸å®¹æ˜“è¯¯æŠ¥</option>
            </select>
        </div>
        
        <!-- é¢„æµ‹æŒ‰é’® -->
        <button id="predict-btn" disabled>å¼€å§‹é¢„æµ‹</button>
        
        <!-- åŠ è½½çŠ¶æ€ -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <p class="loading-text">æ­£åœ¨åˆ†ææ•°æ®ï¼Œè¯·ç¨å€™...</p>
        </div>
    </div>
    
    <!-- ç»“æœå¼¹çª— -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 class="modal-title">æ£€æµ‹ç»“æœ</h2>
            
            <!-- ç»“æœç»Ÿè®¡ -->
            <div class="result-stats">
                <div class="stat-item">
                    <div class="stat-number" id="total-records">0</div>
                    <div class="stat-label">æ€»è®°å½•æ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="attacked-records">0</div>
                    <div class="stat-label">å—æ”»å‡»è®°å½•æ•°</div>
                </div>
            </div>
            
            <!-- æ”»å‡»è¯¦æƒ… -->
            <div class="attack-details">
                <h3 class="section-title">å—æ”»å‡»è®¾å¤‡è¯¦æƒ…</h3>
                <div class="result-items" id="attack-details">
                    <!-- ç»“æœå°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                </div>
            </div>
            
            <!-- æ”»å‡»ç±»å‹åˆ†å¸ƒå›¾è¡¨ -->
            <div class="attack-distribution">
                <h3 class="section-title">æ”»å‡»ç±»å‹åˆ†å¸ƒ</h3>
                <div class="chart-container">
                    <canvas id="attack-chart"></canvas>
                </div>
            </div>
            
            <!-- ç‰¹å¾é‡è¦æ€§éƒ¨åˆ† -->
            <div class="feature-importance">
                <h3 class="section-title">æ¨¡å‹é‡è¦ç‰¹å¾</h3>
                <div id="feature-importance-content">
                    <!-- ç‰¹å¾é‡è¦æ€§å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- å¼•å…¥JavaScript -->
    <script src="script.js"></script>
</body>
</html>